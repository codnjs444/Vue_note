<!-- 
üí° BaseLayout.vue 
====================================================================================
üìå Ïª¥Ìè¨ÎÑåÌä∏ ÏÑ§Î™Ö
- Í∏∞Î≥∏ Î†àÏù¥ÏïÑÏõÉ Ïª¥Ìè¨ÎÑåÌä∏Î°ú, ÏÉÅÎã® Ìó§Îçî(BaseHeader)Î•º Ìè¨Ìï®ÌïòÍ≥† ÏûàÏäµÎãàÎã§.
- Ïù¥ Î†àÏù¥ÏïÑÏõÉ ÎÇ¥ÏóêÏÑú `menuTree`Î•º Pinia storeÎ°úÎ∂ÄÌÑ∞ Î∂àÎü¨ÏôÄ ÏÇ¨Ïö©ÌïòÎäî Íµ¨Ï°∞ÏûÖÎãàÎã§.
====================================================================================
-->

<template>
  <v-app>
    <BaseHeader @route="onMenuClick" @goHome="goHome()" :menuTree="menuTree" />
    <v-main>
      <router-view />
    </v-main>
  </v-app>
</template>

<script setup>
/* üõ†Ô∏è BaseViewÎ°úÎ∂ÄÌÑ∞ Composition API Î©îÏÑúÎìú Í∞ÄÏ†∏Ïò§Í∏∞ */
import BaseView from '@/components/base/BaseView'
import BaseHeader from './header/BaseHeader.vue'

const { computed, onMounted, router } = BaseView()

/* üìÇ ÎùºÏö∞Ìä∏ Í¥ÄÎ†® Store Í∞ÄÏ†∏Ïò§Í∏∞ */
import { useRouteStore } from '@/stores/useRouterStore'
const routeStore = useRouteStore()

/* üå≥ Î©îÎâ¥ Ìä∏Î¶¨Î•º computedÎ°ú Í∞ÄÏ†∏ÏôÄ menuTreeÎ°ú Ï†ïÏùò */
const menuTree = computed(() => routeStore.menuTree)

/* üëâ  Ìôà Ïù¥Îèô Ìï®Ïàò (ÎåÄÏãúÎ≥¥Îìú / dashboard) */
const goHome = () => {
  router.push({ name: 'BaseLayout' })
}

/* üëâ  Î©îÎâ¥ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ (Ìó§Îçî) */
const onMenuClick = (item) => {
  routeStore.handleRouter(item)
  console.log('BaseLayout[onMenuClick]', item)
}

onMounted(() => {
  routeStore.handleMenuSort() // menuTree Îç∞Ïù¥ÌÑ∞Î•º ÏÑ§Ï†ï
  console.log('BaseLayout[menuTree]', menuTree.value)
})
</script>
